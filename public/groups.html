<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Groups — The Human Equation</title>

  <link rel="stylesheet" href="/assets/css/styles.css" />
  <meta name="description" content="Weekly therapist-led support and identity-growth groups at The Human Equation. Parenting, Identity, Fatherhood, Motherhood, 20s Groups, Insight Series, Community Events." />

  <style>
    /* -------------------------------------------------------
       INLINE ENHANCEMENT STYLES
    --------------------------------------------------------- */

    .scroll-btn { cursor: pointer; }

    .new-member-box {
      background:#fafafa;
      padding:25px;
      border-radius:6px;
      margin-top:35px;
      border-left:5px solid #f4bf4f;
    }

    /* Fade & slide reveal for widgets */
    .widget-section {
      display:none;
      opacity:0;
      transform: translateY(12px);
      transition: opacity 0.7s ease, transform 0.5s ease;
      margin-top:40px;
      padding-top:20px;
      border-top:2px solid #eee;
    }
    .widget-section.visible {
      display:block;
      opacity:1;
      transform: translateY(0);
    }

    .widget-title {
      font-size:1.6rem;
      font-weight:700;
      margin-bottom:15px;
      color:#111 !important;
    }

    /* Highlight pulse */
    .highlight {
      animation: pulseHighlight 1.2s ease-out;
    }
    @keyframes pulseHighlight {
      0% { box-shadow:0 0 0px rgba(244,191,79,0.7); }
      50% { box-shadow:0 0 20px rgba(244,191,79,0.7); }
      100% { box-shadow:0 0 0px rgba(244,191,79,0.0); }
    }

    /* Collapse button */
    .collapse-btn {
      margin-top:15px;
      font-size:0.9rem;
      color:#666;
      cursor:pointer;
      text-decoration:underline;
    }

    /* Floating CTA */
    .floating-cta {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background:#f4bf4f;
      color:#000;
      padding:14px 22px;
      border-radius:50px;
      font-weight:700;
      box-shadow:0 4px 12px rgba(0,0,0,0.25);
      cursor:pointer;
      z-index:999;
      font-size:0.95rem;
    }

    /* Back to top button */
    #backToTop {
      display:none;
      position:fixed;
      bottom:85px;
      right:24px;
      background:#2a323b;
      padding:10px 14px;
      border-radius:50%;
      color:#f4bf4f;
      cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,0.3);
      z-index:998;
      font-size:16px;
    }

    /* Icons (C1 — Circular Systems Style) */
    .icon {
      width:22px;
      height:22px;
      margin-right:8px;
      vertical-align:middle;
    }

    /* Quick Compare Table */
    .compare-table {
      width:100%;
      border-collapse:collapse;
      margin-top:30px;
      background:#fff;
      border:1px solid #ddd;
    }
    .compare-table th,
    .compare-table td {
      padding:12px;
      border-bottom:1px solid #eee;
      color:#111 !important;
      text-align:left;
    }
    .compare-table th {
      background:#f9f9f9;
      font-weight:700;
    }

    /* Recommender box */
    .recommender-box {
      background:#ffffff;
      padding:25px;
      border:1px solid #ddd;
      border-radius:6px;
      margin-top:35px;
    }
    .recommender-box h3 {
      color:#111 !important;
      margin-bottom:12px;
    }
    .recommender-box select,
    .recommender-box button {
      margin-top:10px;
      padding:10px;
      font-size:1rem;
      width:100%;
      border-radius:6px;
    }
    .recommender-box select {
      border:1px solid #ccc;
    }
    .recommender-box button {
      background:#f4bf4f;
      border:none;
      font-weight:700;
      cursor:pointer;
    }

    /* Recommendation card */
    #recommendationCard {
      display:none;
      margin-top:25px;
      background:#fff;
      border-left:5px solid #f4bf4f;
      padding:18px;
      border-radius:6px;
    }
    #recommendationCard h4 { color:#111 !important; }
    #recommendationCard p { color:#333 !important; }
  </style>
</head>

<body>

<!-- ======================== HEADER ======================== -->
<header class="site-header">
  <div class="nav-container">
    <a class="logo" href="/">THE HUMAN EQUATION</a>
    <nav class="main-nav">
      <a href="/groups.html" class="active">Groups</a>
      <a href="/membership.html">Membership</a>
      <a href="/insight.html">Insight Series</a>
      <a href="/about.html">About</a>
      <a href="/blog.html">Blog</a>
      <a href="/contact.html">Contact</a>
      <a class="cta" href="/membership.html">Join</a>
    </nav>
  </div>
</header>

<!-- ======================== HERO ======================== -->
<section class="he-hero adjusted-hero hero-align-right">
  <div class="he-hero-overlay"></div>
  <div class="he-hero-content">
    <h1>Weekly Groups</h1>
    <p>Where identity grows, relationships heal, and community makes everything possible.</p>
  </div>
</section>

<!-- ======================== NEW MEMBER PATH ======================== -->
<section class="white-block fade-up">
  <div class="container">
    <h2>How to Join a Group</h2>

    <div class="new-member-box">
      <p><strong>1.</strong> Explore the groups below.</p>
      <p><strong>2.</strong> Use “Find My Group” if you're unsure.</p>
      <p><strong>3.</strong> Click <strong>Join This Group</strong> to open its live schedule.</p>
      <p><strong>4.</strong> Register — your <strong>first week is free.</strong></p>
      <p><strong>5.</strong> Check email for your welcome message + Mighty Networks access.</p>
    </div>
  </div>
</section>

<!-- ======================== FIND MY GROUP ======================== -->
<section class="white-block fade-up">
  <div class="container">
    <h2>Find My Group</h2>

    <div class="recommender-box">
      <h3>Answer a few quick questions</h3>

      <label>Are you a parent?</label>
      <select id="q_parent">
        <option value="">Select…</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>

      <label>What are you navigating?</label>
      <select id="q_issue">
        <option value="">Select…</option>
        <option value="autism">Neurodivergence / Autism</option>
        <option value="teens">Communication / Boundaries with Teens</option>
        <option value="gender">Gender transition support</option>
        <option value="grief">Grief or loss</option>
        <option value="suicide">Suicide bereavement</option>
        <option value="identity">Identity reconstruction</option>
        <option value="belonging">Belonging / loneliness</option>
        <option value="community">Community + connection</option>
      </select>

      <label>Preferred meeting time:</label>
      <select id="q_time">
        <option value="">Select…</option>
        <option value="weekday">Weekday afternoon</option>
        <option value="evening">Weekday evening</option>
        <option value="saturday">Saturday</option>
        <option value="friday">Friday community events</option>
      </select>

      <label>What do you want most right now?</label>
      <select id="q_goal">
        <option value="">Select…</option>
        <option value="parenting">Parenting support</option>
        <option value="identity">Identity growth</option>
        <option value="support">Emotional grounding</option>
        <option value="community">Community connection</option>
      </select>

      <button id="findGroupBtn">Find My Group →</button>

      <div id="recommendationCard">
        <h4 id="rec_title"></h4>
        <p id="rec_desc"></p>
        <button id="openGroupBtn">Open Schedule</button>
      </div>
    </div>
  </div>
</section>

<!-- ======================== QUICK COMPARE TABLE ======================== -->
<section class="white-block fade-up">
  <div class="container">
    <h2>Quick Compare</h2>

    <table class="compare-table">
      <tr>
        <th>Group</th>
        <th>Day</th>
        <th>Time</th>
        <th>Category</th>
        <th>Focus</th>
      </tr>

      <!-- Parenting groups -->
      <tr>
        <td>Parenting Autistic Kids & Teens</td>
        <td>Mon</td>
        <td>3 PM</td>
        <td>Parenting</td>
        <td>Neurodivergence support</td>
      </tr>
      <tr>
        <td>Parenting Teens</td>
        <td>Tue</td>
        <td>3 PM</td>
        <td>Parenting</td>
        <td>Boundaries & communication</td>
      </tr>
      <tr>
        <td>Parents of Trans & GNC Teens</td>
        <td>Wed</td>
        <td>3 PM</td>
        <td>Parenting</td>
        <td>Gender identity support</td>
      </tr>
      <tr>
        <td>Parents Grief Group</td>
        <td>Thu</td>
        <td>3 PM</td>
        <td>Parenting</td>
        <td>Grief & loss</td>
      </tr>
      <tr>
        <td>Survivors of Suicide (Parents)</td>
        <td>Fri</td>
        <td>3 PM</td>
        <td>Parenting</td>
        <td>Suicide bereavement</td>
      </tr>

      <!-- 20s Groups -->
      <tr>
        <td>20s Men</td>
        <td>Wed</td>
        <td>6 PM</td>
        <td>Identity</td>
        <td>Purpose & direction</td>
      </tr>
      <tr>
        <td>20s LGBTQ</td>
        <td>Wed</td>
        <td>7 PM</td>
        <td>LGBTQ+</td>
        <td>Belonging & community</td>
      </tr>

      <!-- Saturday Groups -->
      <tr>
        <td>The Insight Series</td>
        <td>Sat</td>
        <td>12 PM</td>
        <td>Identity</td>
        <td>Identity reconstruction</td>
      </tr>
      <tr>
        <td>Modern Fatherhood</td>
        <td>Sat</td>
        <td>2 PM</td>
        <td>Fatherhood</td>
        <td>Leadership & identity</td>
      </tr>
      <tr>
        <td>Modern Motherhood</td>
        <td>Sat</td>
        <td>3 PM</td>
        <td>Motherhood</td>
        <td>Identity & emotional regulation</td>
      </tr>

      <!-- Community -->
      <tr>
        <td>Saturday Livestream</td>
        <td>Sat</td>
        <td>4 PM</td>
        <td>Community</td>
        <td>Weekly live workshop</td>
      </tr>
      <tr>
        <td>Friday Gaming Night</td>
        <td>Fri</td>
        <td>4–6 PM</td>
        <td>Community</td>
        <td>Social connection</td>
      </tr>

    </table>
  </div>
</section>
<!-- ======================== PARENTING GROUPS ======================== -->
<section class="white-block fade-up">
  <div class="container">
    <h2>Parenting Groups</h2>

    <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; margin-top:40px;">

      <!-- ICON: circular-system-parenting -->
      <svg style="display:none;">
        <symbol id="icon-parenting" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="9" stroke="#f4bf4f" stroke-width="2" fill="none" />
          <circle cx="9" cy="11" r="2" fill="#f4bf4f" />
          <circle cx="15" cy="11" r="2" fill="#f4bf4f" />
          <path d="M7 16c2-2 8-2 10 0" stroke="#f4bf4f" stroke-width="2" fill="none" stroke-linecap="round" />
        </symbol>
      </svg>

      <!-- Autistic Kids -->
      <div class="card">
        <h3><svg class="icon"><use href="#icon-parenting"/></svg>Parenting Autistic Kids & Teens</h3>
        <p><strong>Monday • 3 PM EST</strong></p>
        <p>Support for navigating neurodivergence with clarity & connection.</p>
        <button class="cta-primary scroll-btn" data-target="widget-autistic">Join This Group</button>
      </div>

      <!-- Parenting Teens -->
      <div class="card">
        <h3><svg class="icon"><use href="#icon-parenting"/></svg>Parenting Teens</h3>
        <p><strong>Tuesday • 3 PM EST</strong></p>
        <p>Tools for communication, boundaries, identity development.</p>
        <button class="cta-primary scroll-btn" data-target="widget-teens">Join This Group</button>
      </div>

      <!-- Trans/GNC -->
      <div class="card">
        <h3><svg class="icon"><use href="#icon-parenting"/></svg>Parents of Trans & GNC Teens</h3>
        <p><strong>Wednesday • 3 PM EST</strong></p>
        <p>Affirmation, language, and grounded therapeutic support.</p>
        <button class="cta-primary scroll-btn" data-target="widget-trans">Join This Group</button>
      </div>

      <!-- Grief -->
      <div class="card">
        <h3><svg class="icon"><use href="#icon-parenting"/></svg>Parents Grief Group</h3>
        <p><strong>Thursday • 3 PM EST</strong></p>
        <p>A safe, sacred space for parents carrying profound loss.</p>
        <button class="cta-primary scroll-btn" data-target="widget-grief">Join This Group</button>
      </div>

      <!-- Suicide Survivors -->
      <div class="card">
        <h3><svg class="icon"><use href="#icon-parenting"/></svg>Survivors of Suicide (Parents)</h3>
        <p><strong>Friday • 3 PM EST</strong></p>
        <p>Compassionate support for suicide bereavement.</p>
        <button class="cta-primary scroll-btn" data-target="widget-suicide">Join This Group</button>
      </div>

    </div>
  </div>
</section>

<!-- ======================== 20s GROUPS ======================== -->
<section class="white-block fade-up">
  <div class="container">
    <h2>20s Identity Groups</h2>

    <!-- ICON: circular-system-identity -->
    <svg style="display:none;">
      <symbol id="icon-identity" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="8" stroke="#f4bf4f" stroke-width="2" fill="none"/>
        <circle cx="12" cy="12" r="3" fill="#f4bf4f"/>
        <path d="M12 4v3M12 17v3M4 12h3M17 12h3" stroke="#f4bf4f" stroke-width="2" stroke-linecap="round"/>
      </symbol>
    </svg>

    <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; margin-top:40px;">

      <div class="card">
        <h3><svg class="icon"><use href="#icon-identity"/></svg>20s Men — Identity, Purpose & Relationships</h3>
        <p><strong>Wednesday • 6 PM EST</strong></p>
        <p>Direction, emotional intelligence, and healthy masculinity.</p>
        <button class="cta-primary scroll-btn" data-target="widget-20smen">Join This Group</button>
      </div>

      <div class="card">
        <h3><svg class="icon"><use href="#icon-identity"/></svg>20s LGBTQ — Belonging & Community</h3>
        <p><strong>Wednesday • 7 PM EST</strong></p>
        <p>Identity exploration, belonging, community support.</p>
        <button class="cta-primary scroll-btn" data-target="widget-20slgbtq">Join This Group</button>
      </div>

    </div>
  </div>
</section>

<!-- ======================== SATURDAY GROWTH TRACK ======================== -->
<section class="white-block fade-up">
  <div class="container">
    <h2>The Saturday Growth Track</h2>

    <!-- ICON: circular-system-growth -->
    <svg style="display:none;">
      <symbol id="icon-growth" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="9" stroke="#f4bf4f" stroke-width="2" fill="none"/>
        <path d="M12 6v6l4 2" stroke="#f4bf4f" stroke-width="2" fill="none" stroke-linecap="round"/>
      </symbol>
    </svg>

    <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; margin-top:40px;">

      <div class="card">
        <h3><svg class="icon"><use href="#icon-growth"/></svg>The Insight Series</h3>
        <p><strong>Saturday • 12 PM EST</strong></p>
        <p>Identity reconstruction through narrative & systems work.</p>
        <button class="cta-primary scroll-btn" data-target="widget-insight">Join Insight Series</button>
      </div>

      <div class="card">
        <h3><svg class="icon"><use href="#icon-growth"/></svg>Modern Fatherhood</h3>
        <p><strong>Saturday • 2 PM EST</strong></p>
        <p>Humility-based leadership + grounded fatherhood identity.</p>
        <button class="cta-primary scroll-btn" data-target="widget-fatherhood">Join This Group</button>
      </div>

      <div class="card">
        <h3><svg class="icon"><use href="#icon-growth"/></svg>Modern Motherhood</h3>
        <p><strong>Saturday • 3 PM EST</strong></p>
        <p>Reconstruction of identity & emotional regulation.</p>
        <button class="cta-primary scroll-btn" data-target="widget-motherhood">Join This Group</button>
      </div>

      <div class="card">
        <h3><svg class="icon"><use href="#icon-growth"/></svg>Saturday Livestream</h3>
        <p><strong>Saturday • 4 PM EST</strong></p>
        <p>Weekly live community workshop & integration.</p>
        <button class="cta-primary scroll-btn" data-target="widget-livestream">Join Live Stream</button>
      </div>

    </div>
  </div>
</section>

<!-- ======================== COMMUNITY EVENTS (FREE) ======================== -->
<section class="white-block fade-up">
  <div class="container">
    <h2>Community Events (Free)</h2>

    <!-- ICON: circular-system-community -->
    <svg style="display:none;">
      <symbol id="icon-community" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="9" stroke="#f4bf4f" stroke-width="2" fill="none"/>
        <circle cx="9" cy="11" r="2" fill="#f4bf4f"/>
        <circle cx="15" cy="11" r="2" fill="#f4bf4f"/>
        <path d="M6 16c3-3 9-3 12 0" stroke="#f4bf4f" stroke-width="2" fill="none" stroke-linecap="round"/>
      </symbol>
    </svg>

    <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; margin-top:40px;">

      <div class="card">
        <h3><svg class="icon"><use href="#icon-community"/></svg>Friday Gaming Night</h3>
        <p><strong>Friday • 4–6 PM EST</strong></p>
        <p>A fun, open community event — connect, laugh, decompress.</p>
        <button class="cta-primary scroll-btn" data-target="widget-gaming">Join Gaming Night</button>
      </div>

      <div class="card">
        <h3><svg class="icon"><use href="#icon-community"/></svg>Saturday Livestream</h3>
        <p><strong>Saturday • 4 PM EST</strong></p>
        <p>A free, weekly community teaching & connection event.</p>
        <button class="cta-primary scroll-btn" data-target="widget-livestream">Join Livestream</button>
      </div>

    </div>
  </div>
</section>

<!-- ======================== ORIENTATION CTA ======================== -->
<section class="white-block fade-up">
  <div class="container">
    <h2>Not Sure Where to Start?</h2>
    <p>Book a free 10-minute orientation call with Michael.</p>
    <a href="#" id="orientation-link" class="cta-primary">Book Orientation Call</a>
  </div>
</section>

<!-- ======================== WIDGET SECTIONS ======================== -->
<section class="white-block fade-up">
  <div class="container">

    <!-- Parenting Autistic -->
    <div id="widget-autistic" class="widget-section">
      <div class="widget-title">Parenting Autistic Kids & Teens — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/7vo6njbishbmfo/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-autistic">Hide Schedule</div>
    </div>

    <!-- Parenting Teens -->
    <div id="widget-teens" class="widget-section">
      <div class="widget-title">Parenting Teens — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/mrha4nj5mumjoh/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-teens">Hide Schedule</div>
    </div>

    <!-- Trans/GNC -->
    <div id="widget-trans" class="widget-section">
      <div class="widget-title">Parents of Trans & GNC Teens — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/gabzfdqii8afu5/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-trans">Hide Schedule</div>
    </div>

    <!-- Grief -->
    <div id="widget-grief" class="widget-section">
      <div class="widget-title">Parents Grief Group — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/j95x4lh6dhckdu/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-grief">Hide Schedule</div>
    </div>

    <!-- Suicide Survivors -->
    <div id="widget-suicide" class="widget-section">
      <div class="widget-title">Survivors of Suicide (Parents) — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/hvruib52tzu6xg/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-suicide">Hide Schedule</div>
    </div>

    <!-- 20s Men -->
    <div id="widget-20smen" class="widget-section">
      <div class="widget-title">20s Men — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/fmtetwk1qvjag5/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-20smen">Hide Schedule</div>
    </div>

    <!-- 20s LGBTQ -->
    <div id="widget-20slgbtq" class="widget-section">
      <div class="widget-title">20s LGBTQ — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/n6bd5vzdhq614o/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-20slgbtq">Hide Schedule</div>
    </div>

    <!-- Insight -->
    <div id="widget-insight" class="widget-section">
      <div class="widget-title">The Insight Series — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/n6bd5vzdhq614o/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-insight">Hide Schedule</div>
    </div>

    <!-- Fatherhood -->
    <div id="widget-fatherhood" class="widget-section">
      <div class="widget-title">Modern Fatherhood — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/dw85hcac3k5mwy/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-fatherhood">Hide Schedule</div>
    </div>

    <!-- Motherhood -->
    <div id="widget-motherhood" class="widget-section">
      <div class="widget-title">Modern Motherhood — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/zhksems0o4s8px/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-motherhood">Hide Schedule</div>
    </div>

    <!-- Live Stream -->
    <div id="widget-livestream" class="widget-section">
      <div class="widget-title">Saturday Livestream — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/d25upqbqd276v4/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-livestream">Hide Schedule</div>
    </div>

    <!-- Gaming Night -->
    <div id="widget-gaming" class="widget-section">
      <div class="widget-title">Friday Gaming Night — Schedule</div>
      <script src='https://app.squareup.com/appointments/buyer/widget/9pfpz3x6fvtay6/LPQCJMZ045EAK.js'></script>
      <div class="collapse-btn" data-close="widget-gaming">Hide Schedule</div>
    </div>

  </div>
</section>
<!-- ======================== FOOTER ======================== -->
<footer class="site-footer">
  <div class="footer-grid">
    <div><h4>The Human Equation</h4></div>
    <div>
      <ul>
        <li><a href="/groups.html" class="active">Groups</a></li>
        <li><a href="/membership.html">Membership</a></li>
        <li><a href="/insight.html">Insight Series</a></li>
      </ul>
    </div>
    <div>
      <ul>
        <li><a href="/about.html">About Michael</a></li>
        <li><a href="/blog.html">Blog</a></li>
        <li><a href="/contact.html">Contact</a></li>
      </ul>
    </div>
  </div>

  <p class="copyright">© 2025 The Human Equation. All rights reserved.</p>
</footer>

<!-- Floating CTA -->
<div class="floating-cta scroll-btn" data-target="widget-autistic">
  Join a Group — First Week Free
</div>

<!-- Back To Top -->
<div id="backToTop">▲</div>

<!-- ======================== FULL JS ENHANCEMENT SYSTEM ======================== -->
<script>

// -------------------------------
// Utility: smart scroll offset
// -------------------------------
function smoothScrollTo(el) {
  const headerOffset = 80;
  const elementPos = el.getBoundingClientRect().top + window.pageYOffset;
  window.scrollTo({
    top: elementPos - headerOffset,
    behavior: 'smooth'
  });
}

// -------------------------------
// Hide all widgets
// -------------------------------
function hideAllWidgets() {
  document.querySelectorAll(".widget-section").forEach(sec => {
    sec.classList.remove("visible", "highlight");
    sec.style.display = "none";
  });
}

// -------------------------------
// Show a specific widget
// -------------------------------
function revealWidget(widgetId) {
  hideAllWidgets();

  const el = document.getElementById(widgetId);
  if (!el) return;

  el.style.display = "block";

  requestAnimationFrame(() => {
    el.classList.add("visible", "highlight");
    smoothScrollTo(el);
  });

  // Analytics hook
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    event: "group_widget_revealed",
    group: widgetId
  });
}

// -------------------------------
// Collapse button logic
// -------------------------------
document.querySelectorAll(".collapse-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const target = btn.dataset.close;
    const sec = document.getElementById(target);
    if (!sec) return;

    sec.classList.remove("visible", "highlight");
    setTimeout(() => {
      sec.style.display = "none";
    }, 300);
  });
});

// -------------------------------
// Join button logic (scroll + reveal)
// -------------------------------
document.querySelectorAll(".scroll-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const widget = btn.dataset.target;
    if (!widget) return;
    revealWidget(widget);
  });
});

// -------------------------------
// Back To Top Button
// -------------------------------
const backTop = document.getElementById("backToTop");

window.addEventListener("scroll", () => {
  if (window.scrollY > 400) {
    backTop.style.display = "block";
  } else {
    backTop.style.display = "none";
  }
});

backTop.addEventListener("click", () => {
  window.scrollTo({ top: 0, behavior: "smooth" });
});

// -------------------------------
// Deep Linking
// -------------------------------
window.addEventListener("load", () => {
  if (window.location.hash) {
    const groupId = window.location.hash.substring(1); // remove #
    const widgetId = `widget-${groupId}`;
    const widgetEl = document.getElementById(widgetId);
    if (widgetEl) {
      revealWidget(widgetId);
    }
  }
});

// -------------------------------
// Find My Group Logic
// -------------------------------
const findBtn = document.getElementById("findGroupBtn");
const card = document.getElementById("recommendationCard");
const recTitle = document.getElementById("rec_title");
const recDesc = document.getElementById("rec_desc");
const openGroupBtn = document.getElementById("openGroupBtn");

let recommendedWidget = null;

findBtn.addEventListener("click", () => {

  const isParent = document.getElementById("q_parent").value;
  const issue = document.getElementById("q_issue").value;
  const time = document.getElementById("q_time").value;
  const goal = document.getElementById("q_goal").value;

  // Default recommendation logic
  if (isParent === "yes") {
    if (issue === "autism") {
      recommendedWidget = "widget-autistic";
      recTitle.textContent = "Parenting Autistic Kids & Teens";
      recDesc.textContent = "A supportive space for navigating neurodivergence with clarity & confidence.";
    }
    else if (issue === "teens") {
      recommendedWidget = "widget-teens";
      recTitle.textContent = "Parenting Teens";
      recDesc.textContent = "Tools for communication, boundaries, and staying connected in the teen years.";
    }
    else if (issue === "gender") {
      recommendedWidget = "widget-trans";
      recTitle.textContent = "Parents of Trans & GNC Teens";
      recDesc.textContent = "Affirming guidance for parents supporting gender-expansive teens.";
    }
    else if (issue === "grief") {
      recommendedWidget = "widget-grief";
      recTitle.textContent = "Parents Grief Group";
      recDesc.textContent = "A gentle, sacred space for parents carrying profound loss.";
    }
    else if (issue === "suicide") {
      recommendedWidget = "widget-suicide";
      recTitle.textContent = "Survivors of Suicide (Parents)";
      recDesc.textContent = "Supportive community for suicide bereavement.";
    }
  }

  // Non-parent recommendations
  if (!recommendedWidget) {
    if (issue === "identity" || goal === "identity") {
      recommendedWidget = "widget-insight";
      recTitle.textContent = "The Insight Series";
      recDesc.textContent = "Therapist-guided identity reconstruction & narrative repair.";
    }
    else if (issue === "belonging" || goal === "support") {
      if (time === "evening") {
        recommendedWidget = "widget-20slgbtq";
        recTitle.textContent = "20s LGBTQ Group";
        recDesc.textContent = "A supportive space for identity exploration & belonging.";
      } else {
        recommendedWidget = "widget-20smen";
        recTitle.textContent = "20s Men Group";
        recDesc.textContent = "Identity, purpose, emotional grounding & masculine integrity.";
      }
    }
    else if (time === "friday" || goal === "community") {
      recommendedWidget = "widget-gaming";
      recTitle.textContent = "Friday Gaming Night";
      recDesc.textContent = "A free, low-pressure way to connect & join the community.";
    }
  }

  // If still none, fallback
  if (!recommendedWidget) {
    recommendedWidget = "widget-livestream";
    recTitle.textContent = "Saturday Livestream";
    recDesc.textContent = "A free weekly workshop for grounding, learning, and connecting.";
  }

  // Show card
  card.style.display = "block";

  // Prepare button
  openGroupBtn.onclick = () => {
    revealWidget(recommendedWidget);
  };

  // Analytics hook
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    event: "group_recommendation",
    recommended: recommendedWidget
  });
});
</script>

</body>
</html>
